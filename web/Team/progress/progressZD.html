<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
This is an example weekly progress report document that team members can use to report their individual progress 
of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
presented in the "Progress Report Policy" document, available online at https://engineering.purdue.edu/ece477/Course/Policies/policies.html

Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
contact course staff.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
<base href="https://engineering.purdue.edu/477grp15/" />

<!--Content-->
<title>ECE477 Course Documents</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="George Hadley">
<meta name = "format-detection" content = "telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<style>
#myDIV {
	width: 100%;
	padding: 50px 0;
	text-align: center;
	background-color: white;
	margin-top: 20px;
}

.button {
    background-color: black;
	border-radius: 30px;
	color: gold;
	padding: 10px 20px;
	text-align: center;
	text-decoration: none;
	display: inline-block;
	font-size:12px;
}
</style>
<!--CSS-->
<link rel="stylesheet" href="css/default.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/content.css">
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->

</head>
<body>
<div id="wrapper_site">
    <div id="wrapper_page">
	<!-- Instantiate global site header.-->
	<div id="header"></div>
		<!-- Instantiate site global navigation bar.-->
		<div id="menu"></div>
	
		<!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
			img folder located at this directory level. -->
		<div id="banner">
			<img src="Files/img/BannerImgExample.jpg"></img>
		</div>
	
		<!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
			and include things such as a file lister (for listing out homework assignments or tutorials)
		-->
		<div id="content" >
            <h2>Progress Reports for Ziad Dannawi</h2>
            <p> Select a button to reveal that week's progress report. This was an experiment conducted in order to further my web design skills in addition to providing a cleaner look for the page; hopefully it works across different browsers and computers.</p><br><br>
			<button class="button" onclick="week(1)">Week 1</button>
			<button class="button" onclick="week(2)">Week 2</button>
			<button class="button" onclick="week(3)">Week 3</button>
			<button class="button" onclick="week(4)">Week 4</button>
			<button class="button" onclick="week(5)">Week 5</button>
			<button class="button" onclick="week(6)">Week 6</button>
			<button class="button" onclick="week(7)">Week 7</button>
			<button class="button" onclick="week(8)">Week 8</button>
			<button class="button" onclick="week(9)">Week 9</button>
			<button class="button" onclick="week(10)">Week 10</button>
			<button class="button" onclick="week(11)">Week 11</button>
			<button class="button" onclick="week(12)">Week 12</button>
			<button class="button" onclick="week(13)">Week 13</button>
			<button class="button" onclick="week(14)">Week 14</button>
			<button class="button" onclick="week(15)">Week 15</button>
			<button class="button" onclick="week(16)">Week 16</button>
			
			
			<div id="week1">
            <h4>Week 1:</h4>
            <b>Date:</b>8/25/2017<br>
            <b>Total hours:</b>5<br>
            <b>Description of design efforts:</b><br>
            This week was mainly used to set up our project website in addition to a collaboration tool 
            <br>
			</div>
			
			<div id="week2">
            <h4>Week 2:</h4>
            <b>Date:</b>9/1/2017<br>
            <b>Total hours: </b>7<br>
            <b>Description of design efforts:</b><br>
            This week was mainly used to discuss the functionality of the Super Susan within the team. What was discussed was what systems we were using for rotation, for weight sensing, and for user input. A functional block diagram was devised to showcase how the Super Susan would work at a basic level, and a system overview was created to help visualize how the Super Susan will be interfacing with different modules.</br>
			
			In this week's Functional Overview assignment, I was responsible for the theory of operation and the expected usage case.
			

			<br><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/block_diagram.png">
			<br><br><br>
            <img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/sys_overview.png">
			</div>
			
			<div id="week3">
			<h4>Week 3:</h4>
            <b>Date:</b>9/8/2017<br>
            <b>Total hours: </b>10<br>
            <b>Description of design efforts:</b> This week I set up the working environment for the microcontroller in preparation for prototyping, this includes eclipse as the IDE, the drivers for our STM board, and all the files necessary for us to be able to develop in C for the board using eclipse. Additionally, I helped Clifton disassemble one of two printers which he brought in to scavenge for motors. Unfortunately, the motors that we ended up getting out of the printers were DC motors and not stepper motors which we will be using. Until we get our hands on the microcontroller, we can't begin any real prototyping, but the environment has been set up to allow for us to quickly dive into it.<br>
			<br>
			<br><b>Fig.1 Beginning of flowchart</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/Flowchart.png">
			<br><b>Fig.2 Branches of flowchart</b><br><br>
            <img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/Flowchart2.png">
			<br><br>
			As part of the Software Overview assignment, I came up with flowcharts to show how the program will flow functionally. Figures 1 and 2 are the same flowchart, but have been split up for visual clarity. It begins by prompting the user for their WiFi information to secure a connection to the internet before entering an idle phase to await commands. From there, depending on which command it receives, it will split into a branch and follow it until it reaches the idle phase again.
			<br><br>
			</div>
			
			<div id="week4">			
			<h4>Week 4:</h4>
            <b>Date:</b>9/15/2017<br>
            <b>Total hours: </b>5<br>
            <b>Description of design efforts:</b>We have acquired the microcontroller that we will be using for the project, and I have begun getting my feet wet with the programming environment and the microcontroller itself. No demonstratable progress has been made with the microcontroller as of yet; I am still trying to figure out how to work the microcontroller.<br>
			<br>Preliminary testing has been conducted on our Hall Effect sensor and rotary dial. From the testing it has been concluded that the Hall Effect sensor that was used has too low of a sensitivity since the triggering magnet had to be almost touching the sensor for it to trigger. Shown below in the four figures are the basic tests that have been conducted. Figures 1 and 2 show the Hall Effect sensor being triggered, while figures 3 and 4 show the rotary encoder being used as a switch.
			<br><br><br><b>Fig.1 Hall Effect Sensor Off (LED Off)</b><br><br>
			
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/HallOff.jpg">
			<br><b>Fig.2 Hall Effect Sensor On  (LED On)</b><br><br>
            <img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/HallOn.jpg">
			<br><b>Fig.3 Rotary Encoder (No switch)</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/RotaryOff.jpg">
			<br><b>Fig.4 Rotary Encoder (switch depressed)</b><br><br>
            <img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/RotaryOn.jpg">
			<br><br>
			</div>
			
			<div id = "week5">
			<h4>Week 5:</h4>
            <b>Date:</b>9/15/2017<br>
            <b>Total hours: </b>10<br>
            <b>Description of design efforts:</b> Microcontroller prototyping has begun with the implementation of a four signal pulser that commands the motor driver to rotate the motor clockwise or counterclockwise depending on the order of the pulsed signals. This can be seen in Rebecca's progress report. Additionally, I have begun working with SPI with the ultimate goal of communicating with an LCD.<br>
			<br>I ran into difficulties trying to work a shift register to display things onto the LCD we are using, but I have confirmed that the SPI module is indeed sending the data that I want by monitoring the MOSI line through an oscilloscope. The output is shown below in Figure 1.
			<br><br><br><b>Fig. 1 MOSI line through oscilloscope</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/spi_mosi.jpg"><br><br>
			<br>The yellow signal is the MOSI line and the green signal is the SPI CLK line, this is only a snippet of the entire transmission, which reads: "0100100001100101011011000110110001101111", which when converted to English says: "Hello", which is what was originally sent through SPI.
			</div>
			

			<div id = "week6">
			<h4>Week 6: </h4>
			<b>Data:</b>9/29/2017<br>
			<b>Total hours: </b>16<br>
			<b>Description of design efforts:</b>Difficulties were encountered while trying to program the microcontroller as the ST-Link Utility would not establish communications with the board. After some thinking and help from Clifton, the issue was recognized as some reset pin being pulled low (the micro was previously mounted on a breadboard.) A simple fix was to mount the microcontroller on standoffs instead.
			<br><br><br><b>Fig. 1 Microcontroller Mounted</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/standoffs.jpg"><br><br>
			<br> Barring the technical hiccup of establishing communications with the board, most of the week was spent getting the LCD to display text through the SPI module on the microcontroller and an 8-bit shift register. We can successfully display information on the LCD now, as can be seen in Figure 2 and Figure 3.
			<br><br><br><b>Fig. 2 Green LCD Test</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/greenlcd.jpg"><br><br>
			<br><br><br><b>Fig. 3 Blue LCD Test</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/bluelcd.jpg"><br><br>
			</div>
			
			<div id = "week7">
			<h4>Week 7: </h4>
			<b>Data:</b>10/06/2017<br>
			<b>Total hours: </b>6<br>
			<b>Description of design efforts:</b>I would like to preface this week’s report by addressing the concerns about last week, most of the time was indeed spent getting the SPI module to work, from figuring out the abstraction layer to trying to work through timing issues. This week has been relatively slow because of an exam on Thursday and because the part I’m working on requires the input card to be fully operational before any development can begin.<br><br>
			I soldered the input card together with assistance from Clif since some parts were extremely small for a novice solder job. The input card was handed to me because I was seeking more solder experience and the input side of things has been relegated to me, with support from Clif. During my soldering sessions throughout the week I learned how to operate a soldering iron, how to tin the tip, how to use flux, how to solder efficiently, and how to clean the board when done. <br><br>
            <br><br><b>Fig. 1 Back of Soldered PCB (front face is relatively negligible)</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/pcb_solder.jpg"><br><br>
			The significance of the input card is that I am now able to begin developing software for the LCD, because the NewHaven display we are using has pins that are not suitable for breadboard testing. With the card soldered and ready, it should be a matter of connecting proper cabling to the board and then programming the microcontroller as done previously. I also finalized the pinout for the microcontroller in preparation for the motherboard PCB, which can be seen in the next figure.<br><br>
			<br><br><br><b>Fig. 2 Finalized Microcontroller Pinout</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/pinout.PNG"><br><br>	
		    SPI1 will be used as the main SPI bus for all of our components to communicate with the microcontroller, with SPI2 and SPI5 being dedicated SPI lines for our weight sensors. The naming should be self explanitory, with the major component prefacing the rest of the tag. "F" is the input card, "NFC" is the NFC board, "IR" is our infrared circuit, and "MTR" is the motor controller. One challenge which we may face is setting up the programming header to allow us to program the microcontroller when it's soldered onto our PCB. The yellow pins seem to be the pins that are required per the datasheet, but we have had little success getting it to work.
			</div>
			<div id = "week8">
			</div>
			<div id = "week9">
			<h4>Week 9: </h4>
			<b>Data:</b>10/20/2017<br>
			<b>Total hours: </b>8<br>
			<b>Description of design efforts:</b>An exciting event unfolded this week, I was reunited with my old acquaintance the magic smoke. I hooked up the Microcontroller PWM to an LED to begin testing how PWM works on the STM, but forgot the SPI lines connected to the ESP (WiFi chip which was dangling, not connected to power). After hooking up the circuit the ESP started smoking, and it is most likely dead. Not a massive loss as we have spares, but this is a valuable lesson to make sure every part of the circuit is grounded appropriately.<br><br>
            On a more serious note, I only got PWM to work this week because I have been swamped in my other classes and couldn't devote as much time as I wanted to. I have successfully generated a PWM signal and I can adjust its duty cycle, I used this signal to strobe an LED, but four of these signals will be used to power the motor in the future.
			<br><br><b>Fig. 1 Strobing LED Gif</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/pwm_led.gif"><br><br>
			<br><br><br><b>Fig. 2 PWM Waveform</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/pwm_waveform.jpg"><br><br>	
			</div>
			
			<div id = "week10">
			<h4>Week 10: </h4>
			<b>Data:</b>10/27/2017<br>
			<b>Total hours: </b>11<br>
			<b>Description of design efforts:</b> Most of the time spent this week was trying to get SPI communication between the Microcontroller and the ESP 8266 Wifi Module. The Microcontroller will be acting as an SPI master and the ESP 8266 will be an SPI slave. If tested individually, SPI transmissions work from the microcontroller and they work on the ESP 8266, but when connected together to exchange data, the data read is always corrupt. Since I've wasted a lot of time trying to get it to work but to no avail, I have contacted course staff to see if they can provide any assistance. After doing so, I set up interrupts on the microcontroller and tested it with the ESP 8266. In the final design, the ESP will be sending an interrupt request to the microcontroller to request data (this will be triggered through the phone app, which is currently being developed. Hopefully we will be able to demonstrate this in Show-Me-A-Thing next week.) through SPI. <br>
			The interrupt works, but the functionality in the interrupt handler right now is to increment a counter and display that on an LCD.
			<br><br><b>Fig. 1 Interrupt LCD Gif</b><br><br>
			<img src="https://engineering.purdue.edu/477grp15/Team/progress/images/z_img/irqstatus.gif"><br><br>
			</div>
	   </div>
	
		<!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
		<div id="footer"></div>
    </div>
</div>

<!--JS-->
<script src="js/jquery.js"></script>
<script src="js/jquery-migrate-1.1.1.js"></script>
<script> 
function week(i) {
	switch(i) {
		case 1: var x = document.getElementById("week1"); break;
		case 2: var x = document.getElementById("week2"); break;
		case 3: var x = document.getElementById("week3"); break;
		case 4: var x = document.getElementById("week4"); break;
		case 5: var x = document.getElementById("week5"); break;
		case 6: var x = document.getElementById("week6"); break;
		case 7: var x = document.getElementById("week7"); break;
		case 8: var x = document.getElementById("week8"); break;
		case 9: var x = document.getElementById("week9"); break;
		case 10: var x = document.getElementById("week10"); break;
		case 11: var x = document.getElementById("week11"); break;
		case 12: var x = document.getElementById("week12"); break;
		case 13: var x = document.getElementById("week13"); break;
		case 14: var x = document.getElementById("week14"); break;
		case 15: var x = document.getElementById("week15"); break;
		case 16: var x = document.getElementById("week16"); break;
	}
		if (x.style.display == "none"){
		x.style.display = "block";
	} else {
		x.style.display = "none";
	}

}

</script>
<script type="text/javascript">
week(1);week(2);week(3);week(4);week(5);week(6);week(7);week(8);week(9);week(10);week(11);week(12);week(13);week(14);week(15);week(16);
$(document).ready(function() {
    $("#header").load("header.html");
	$("#menu").load("navbar.html");
	$("#footer").load("footer.html");
});
</script>

</body>
</html>
